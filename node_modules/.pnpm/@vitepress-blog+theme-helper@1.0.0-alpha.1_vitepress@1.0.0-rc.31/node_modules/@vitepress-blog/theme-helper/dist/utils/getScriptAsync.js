/*! 
 * vitepress-blog v1.1.0-alpha.1
 * (c) yue1123
 * Homepage: https://github.com/yue1123/vitepress-blog
 * Released under the MIT License.
 */
const scriptLoaderWrapper = {};
function getScriptAsync({ key, src }) {
  if (!scriptLoaderWrapper[key]) {
    scriptLoaderWrapper[key] = new Promise((resolve, reject) => {
      const script = document.createElement("script");
      const cal = () => {
        resolve();
        window.document.body.removeChild(script);
      };
      script.onload = function() {
        if (!this.readyState || this.readyState == "loaded" || this.readyState == "complete") {
          script.onload = null;
          cal();
        }
      };
      script.src = src;
      script.type = "text/javascript";
      script.defer = true;
      script.onerror = reject;
      document.body.appendChild(script);
    });
  }
  return scriptLoaderWrapper[key];
}

export { getScriptAsync, scriptLoaderWrapper };
